# 📙 09.10 GCP
## 📡 VPC
### 개요

Google Cloud VPC는 VM, Kubernetes, App Engine 환경을 위한 네트워킹 기능을 제공

VPC는 글로벌 리소스로 여러 지역에 서브넷을 자동 생성하고, 전역 WAN으로 연결됨

이번 실습에서는 Auto Mode VPC 네트워크를 만들고 방화벽 규칙과 VM 인스턴스를 구성한 뒤, 연결성을 테스트함

2. 사전 준비

Start Lab 버튼 클릭

Open Google Cloud console 버튼 선택

Chrome 사용자라면 Incognito 창에서 열기 권장

제공된 Username 복사 후 로그인 화면에 입력

Next 클릭 후 Password 입력

추가 절차

약관 동의

복구 옵션 및 2단계 인증 설정 안 함

무료 체험 가입 안 함

Google Cloud Console이 열리면 준비 완료

3. Task 1 : 기본 네트워크 탐색
Subnet 확인

Navigation 메뉴 → VPC network > VPC networks

default 클릭

Subnets 탭에서 각 리전에 있는 기본 서브넷 확인

Route 확인

좌측 메뉴에서 Routes 클릭

Network → default, Region → 실습 리전 선택

각 서브넷에 대한 라우트 존재 확인

Firewall 규칙 확인

좌측 메뉴에서 Firewall 클릭

기본 제공 4개 규칙 확인

default-allow-icmp

default-allow-rdp

default-allow-ssh

default-allow-internal

Firewall 규칙 삭제

모든 기본 규칙 선택 후 Delete 클릭

삭제 확인

기본 네트워크 삭제

Navigation 메뉴 → VPC network > VPC networks

default 네트워크 선택 후 Delete 클릭

삭제 후 Routes, Firewall 탭에서 항목이 없는 것 확인

VM 인스턴스 생성 시도

Navigation 메뉴 → Compute Engine > VM instances

Create instance 클릭 → 기본값 유지 후 생성 시도

오류 발생 확인 → 네트워크 없음 메시지 확인

생성 취소

4. Task 2 : VPC 네트워크 및 VM 인스턴스 생성
Auto Mode VPC 생성

Navigation 메뉴 → VPC network > VPC networks

Create VPC network 클릭

이름 : mynetwork

Subnet 모드 : Automatic

Firewall 규칙 : 모두 선택

생성 후 각 리전에 자동 생성된 Subnet 확인

VM 인스턴스 생성 (Region 1)

Navigation 메뉴 → Compute Engine > VM instances

Create Instance 클릭

Name : mynet-us-vm

Region : Region 1, Zone : Zone 1

Series : E2, Machine type : e2-micro

Create 클릭

VM 인스턴스 생성 (Region 2)

Create Instance 클릭

Name : mynet-r2-vm

Region : Region 2, Zone : Zone 2

Series : E2, Machine type : e2-micro

Create 클릭

5. Task 3 : VM 인스턴스 연결성 확인
기본 연결성 테스트

Navigation 메뉴 → Compute Engine > VM instances

mynet-us-vm에서 SSH 클릭

내부 IP로 ping 테스트

ping -c 3 <mynet-r2-vm 내부 IP>


외부 IP로 ping 테스트

ping -c 3 <mynet-r2-vm 외부 IP>

ICMP 방화벽 규칙 제거 후 확인

Navigation 메뉴 → VPC network > Firewall

mynetwork-allow-icmp 규칙 삭제

SSH 터미널에서 내부 IP는 ping 성공, 외부 IP는 ping 실패 확인

Custom 방화벽 규칙 제거 후 확인

mynetwork-allow-custom 규칙 삭제

SSH 터미널에서 내부 IP ping 시도 → 실패 확인

SSH 종료

SSH 방화벽 규칙 제거 후 확인

mynetwork-allow-ssh 규칙 삭제

VM Instances에서 SSH 접속 시도 → 실패 확인

6. 완료

기본 네트워크의 서브넷, 라우트, 방화벽 규칙을 탐색하고 삭제함

새 Auto Mode VPC와 VM 인스턴스를 생성함

방화벽 규칙에 따라 연결성이 어떻게 달라지는지 확인함